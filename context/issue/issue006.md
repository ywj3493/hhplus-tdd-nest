# Issue 006: Business Rules Implementation

## Problem
STEP2의 첫 단계로, 포인트 충전/사용에 대한 비즈니스 규칙을 추가해야 합니다. 현재는 기본적인 검증만 있어서 실제 비즈니스 정책을 반영하지 못하고 있습니다.

## Plan
1. PointService에 4가지 비즈니스 규칙 추가:
   - 최소 충전 금액: 1,000원
   - 충전 금액 단위: 100원 단위만 가능
   - 최소 사용 가능 잔액: 5,000원 이상 있어야 사용 가능
   - 최대 충전 금액: 200,000원
2. 각 규칙 위반 시 명확한 에러 메시지 제공
3. 단위 테스트 작성 (각 규칙별 테스트 케이스)

## Test Scenarios

### 충전 관련 규칙
- [ ] 1,000원 미만 충전 시도 시 에러 발생
- [ ] 100원 단위가 아닌 금액(예: 1,050원) 충전 시도 시 에러 발생
- [ ] 200,000원 초과 충전 시도 시 에러 발생
- [ ] 1,000원 정확히 충전 성공
- [ ] 200,000원 정확히 충전 성공
- [ ] 10,000원(100원 단위) 충전 성공

### 사용 관련 규칙
- [ ] 잔액이 5,000원 미만일 때 사용 시도 시 에러 발생
- [ ] 잔액이 정확히 5,000원일 때 일부 사용 가능
- [ ] 잔액이 5,000원 이상일 때 정상 사용
- [ ] 사용 후 잔액이 5,000원 미만이 되는 경우 허용 (사용 전 체크만 함)

### 기존 검증 유지
- [ ] 0원 이하 충전/사용 시 에러 (기존 유지)
- [ ] 정수가 아닌 금액 충전/사용 시 에러 (기존 유지)
- [ ] 잔액보다 많은 금액 사용 시 에러 (기존 유지)

## Acceptance Criteria
- [ ] 4가지 비즈니스 규칙이 모두 구현됨
- [ ] 각 규칙에 대한 단위 테스트 작성 및 통과
- [ ] 명확한 에러 메시지 제공
- [ ] 기존 테스트가 모두 통과함
- [ ] Red-Green-Refactor 사이클로 3개 커밋 생성
- [ ] Given-When-Then 패턴 적용
- [ ] 한글 테스트 설명 사용

## TDD Phases
### Red Phase
- [x] 실패하는 테스트 작성
- [x] 커밋: `test: add failing tests for business rules` (ae80678)

### Green Phase
- [x] 최소 구현으로 테스트 통과
- [x] 커밋: `feat: implement business rules (minimal)` (415037b)

### Refactor Phase
- [x] 코드 개선 및 리팩토링
- [x] 커밋: `refactor: improve business rules implementation` (5754995)

## Status
- [x] Issue Created
- [x] Red Phase
- [x] Green Phase
- [x] Refactor Phase
- [x] Completed

## Results
- 총 3개 커밋 생성 (Red-Green-Refactor)
- 10개의 새로운 테스트 추가 (충전 6개, 사용 4개)
- 전체 44개 테스트 모두 통과
- 비즈니스 룰 4가지 모두 구현 완료:
  1. ✅ 최소 충전 금액: 1,000원
  2. ✅ 충전 금액 단위: 100원 단위
  3. ✅ 최소 사용 가능 잔액: 5,000원 이상
  4. ✅ 최대 충전 금액: 200,000원
- 검증 로직을 private 메서드로 분리하여 가독성 향상
- 비즈니스 룰을 상수로 추출하여 유지보수성 향상

## Notes
- 비즈니스 규칙은 명확한 숫자로 정의됨
- 에러 메시지는 한글로 작성하여 사용자 친화적으로 함
- 충전 금액의 100원 단위 체크: `amount % 100 === 0`
- 사용 가능 잔액 체크는 사용 **전** 잔액 기준
